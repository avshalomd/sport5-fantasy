function diffusionClient(o){function i(o,i,n){$.log("Subscribing to = "+s),o.subscribe(n).asType(i).on({value:function(o,i,n,t){n=n.get(),oc.debugOn&&($.log("Topic: "+o),$.log(n)),e=!0,diffusionUI.onUpdateEvent(o,n)},subscription:function(){}});var c=setTimeout(function(){e||!o||o.isClosed()||o.close()},1e4);t[n]={session:o,diffTimeout:c}}function n(n){if($.log("Connection Status = "+n.isConnected()),n.isConnected()){var e=o.datatypes.json();oc.mobileIsMatchView=$activePanel(".beta-match-odds-list").length>0,s.forEach(function(o,t){setTimeout(function(){i(n,e,o)},150*t)})}}oc.diffusion.betslipData=[];var e=!1,t={},s=[],c=6e5,f=6e4,u=25,r=0,a=function(i){l(s),s=i.topic;var e="443";$.log("oc diffusion server : "+oc.diffusion.server),s.length>0&&o.connect({host:oc.diffusion.server,port:e,secure:!0,reconnect:{timeout:c,strategy:d}}).then(n,function(o){$.log("failed to connect"+o)})},l=function(o){o.forEach(function(o){if(""!==o){var i=t[o].session,n=t[o].diffTimeout;oc.diffusion.betslipData=[],$.log("Disconnecting previous Diffusion Topic: "+o),i&&!i.isClosed()&&(i.close(),n&&clearTimeout(n))}})};oc.mobileIsMatchView=!1;var d=function(o,i){if($.log("****Lost Connection to Diffusion Server.****"),r>u)$.log("Attempt number :"+r+"."),i();else{$.log("****Attempting to reconnect with Diffusion Server****");var n=Math.min(100*Math.pow(2,r++),f);setTimeout(o,n)}};return{init:a}}oc.diffusion.subscriberClientNew=diffusionClient(window.diffusion);